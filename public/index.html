<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fleet Tracker</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1><i class="fas fa-plane"></i> Fleet Tracker</h1>
      <p class="subtitle">Real-time aircraft tracking powered by ADS-B</p>
    </header>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Map Section -->
      <div class="map-section">
        <div id="map"></div>
      </div>

      <!-- Data Section -->
      <div class="data-section">
        <!-- Flight Status Table -->
        <div class="panel">
          <h2><i class="fas fa-list"></i> Flight Status</h2>
          <div id="status-table-container">
            <table id="status-table">
              <thead>
                <tr>
                  <th>Aircraft</th>
                  <th>Status</th>
                  <th>Altitude</th>
                  <th>Speed</th>
                  <th>Last Update</th>
                </tr>
              </thead>
              <tbody id="status-table-body">
                <tr>
                  <td colspan="5" class="loading">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Statistics Panel -->
        <div class="panel">
          <h2><i class="fas fa-chart-bar"></i> Statistics</h2>
          <div id="statistics-container">
            <p class="loading">Loading statistics...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p>Data provided by <a href="https://opensky-network.org/" target="_blank">OpenSky Network</a></p>
    </footer>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Custom JavaScript -->
  <script src="/js/map.js"></script>
  <script src="/js/table.js"></script>
  <script src="/js/stats.js"></script>

  <script>
    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Fleet Tracker initialized');

      // Initialize map
      initMap();

      // Initialize status table
      initStatusTable();

      // Initialize statistics
      initStatistics();

      // Start periodic updates (every 10 seconds)
      setInterval(() => {
        updateMap();
        updateStatusTable();
        updateStatistics();
      }, 10000);
    });
  </script>
</body>
</html>
